import{b as w}from"./boardApi-DA73oR28.js";import{h as x}from"./moment-C5S46NFB.js";import{u as q,a as k,c as C,d as V,r as B,q as D,l as h,o as i,e as d,f as t,t as r,F as I,s as N,m as c,p as o,x as f,h as p}from"./index-CuHKsysv.js";import"./index-CNflFJFo.js";const Y=t("h1",{class:"mb-3"},[t("i",{class:"fa-solid fa-paste"}),p(" 게시글 목록")],-1),F={class:"mt-5 text-end"},L={class:"table table-striped"},R=t("thead",null,[t("tr",null,[t("th",{style:{width:"60px"}},"No"),t("th",null,"제목"),t("th",{style:{width:"100px"}},"작성자"),t("th",{style:{width:"120px"}},"작성일")])],-1),A={class:"my-5 d-flex"},M=t("div",{class:"flex-grow-1 text-center"},"페이지 네이션",-1),P={class:"flex-grow-1 text-center"},T=t("i",{class:"fa-solid fa-backward-fast"},null,-1),E=t("i",{class:"fa-solid fa-caret-left"},null,-1),H=t("i",{class:"fa-solid fa-caret-right"},null,-1),S=t("i",{class:"fa-solid fa-forward-fast"},null,-1),U=t("i",{class:"fa-solid fa-pen-to-square"},null,-1),K={__name:"BoardListPage",setup(W){const s=q(),g=k(),n=C({}),y=V(()=>n.value.list),e=B({page:parseInt(s.query.page)||1,amount:parseInt(s.query.amount)||10}),b=async l=>{g.push({query:{page:l,amount:e.amount}})};D(s,async l=>{console.log("WATCH",s.query.page),e.page=parseInt(s.query.page),e.amount=parseInt(s.query.amount),await m(e)});const m=async l=>{try{n.value=await w.getList(l),console.log(n.value)}catch(u){console.error("Failed to load data:",u)}};return m(e),(l,u)=>{const _=h("router-link"),v=h("vue-awesome-paginate");return i(),d("div",null,[Y,t("div",F,"(총 "+r(n.value.totalCount)+"건)",1),t("table",L,[R,t("tbody",null,[(i(!0),d(I,null,N(y.value,a=>(i(),d("tr",{key:a.no},[t("td",null,r(a.no),1),t("td",null,[c(_,{to:{name:"board/detail",params:{no:a.no}}},{default:o(()=>[p(r(a.title),1)]),_:2},1032,["to"])]),t("td",null,r(a.writer),1),t("td",null,r(f(x)(a.regDate).format("YYYY-MM-DD")),1)]))),128))])]),t("div",A,[M,t("div",P,[c(v,{"total-items":n.value.totalCount,"items-per-page":e.amount,"max-pages-shown":5,"show-ending-buttons":!0,modelValue:e.page,"onUpdate:modelValue":u[0]||(u[0]=a=>e.page=a),onClick:b},{"first-page-button":o(()=>[T]),"prev-button":o(()=>[E]),"next-button":o(()=>[H]),"last-page-button":o(()=>[S]),_:1},8,["total-items","items-per-page","modelValue"])]),t("div",null,[c(_,{to:{name:"board/create",query:f(s).query},class:"btn btn-primary"},{default:o(()=>[U,p(" 글 작성")]),_:1},8,["to"])])])])}}};export{K as default};
